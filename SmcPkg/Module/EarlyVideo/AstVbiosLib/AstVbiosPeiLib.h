//****************************************************************************
//**                                                                        **
//**            (C)Copyright 1993-2017 Supermicro Computer, Inc.            **
//**                                                                        **
//****************************************************************************
//  File History
//
//  Rev. 1.03
//    Bug Fix:  Fix POST hang up when set MMCFG Base to 3G.
//    Reason:   
//    Auditor:  Isaac Hsu
//    Date:     May/17/2017
//
//  Rev. 1.02
//    Bug Fix:  Fix Early Graphic Logo malfunction for DP platform.
//    Reason:   
//    Auditor:  Isaac Hsu
//    Date:     Mar/15/2017
//
//  Rev. 1.01
//    Bug Fix:  Early Graphic Logo Support.
//    Reason:   
//    Auditor:  Isaac Hsu
//    Date:     Mar/14/2017
//
//  Rev. 1.00
//    Bug Fix:  Initialize revision
//    Reason:   Get base code from Grantley
//    Auditor:  Salmon Chen
//    Date:     Dec/05/2014
//
//****************************************************************************
//****************************************************************************

#ifndef __ASTVBIOS_PEI_LIB__H__
#define __ASTVBIOS_PEI_LIB__H__
#ifdef  __cplusplus
extern "C" {
#endif
#include <AmiPeiLib.h>
#include <AstVbiosPciBusEmu.h>
#include <PeiSimpleTextOutPpi.h>
#include <token.h>

#if EarlyVideo_Mode
#define LEGACY_BUS1  0x11

#define FV_BB_SMC_LOGO_FFS_FILE_1_GUID { 0xe374b56b, 0xd7af, 0x43f6, { 0xa6, 0xcd, 0x55, 0x6c, 0x28, 0x3b, 0xc, 0xf8 } }
#define FV_BB_SMC_LOGO_FFS_FILE_2_GUID { 0x83839a19, 0x8593, 0x4a28, { 0xb2, 0xd1, 0x17, 0x12, 0x3b, 0xb6, 0x96, 0x40 } }
#define FV_BB_SMC_LOGO_FFS_FILE_3_GUID { 0x8e4b6e8e, 0x97c5, 0x4d9b, { 0x94, 0x64, 0x6, 0xcd, 0xc4, 0xb5, 0xa4, 0xa } }
#define FV_BB_SMC_LOGO_FFS_FILE_4_GUID { 0x4dee1456, 0xcf84, 0x445f, { 0x80, 0x16, 0xbd, 0x42, 0x3c, 0x5e, 0x55, 0x25 } }
#define FV_BB_SMC_LOGO_FFS_FILE_5_GUID { 0x8a2c703b, 0x3e6b, 0x43b5, { 0xb1, 0x43, 0xcc, 0x16, 0x26, 0xea, 0x31, 0x7e } }
#define FV_BB_SMC_LOGO_FFS_FILE_6_GUID { 0xca248daf, 0xfebd, 0x42d4, { 0x97, 0xff, 0x91, 0x4c, 0xc1, 0xfb, 0xe1, 0xbe } }
#define FV_BB_SMC_LOGO_FFS_FILE_7_GUID { 0x36fb6ef7, 0x3f01, 0x4b2a, { 0xa7, 0x72, 0xdf, 0x5c, 0x4b, 0xfc, 0x76, 0x98 } }
#define FV_BB_SMC_LOGO_FFS_FILE_8_GUID { 0x678cd0c7, 0xcd58, 0x4783, { 0xbe, 0xa4, 0x47, 0xaf, 0x24, 0xbe, 0x6d, 0xbd } }
#define FV_BB_SMC_LOGO_FFS_FILE_9_GUID { 0xaa42997a, 0xb6df, 0x4546, { 0x9c, 0x9b, 0x4c, 0x2d, 0x42, 0x3d, 0x51, 0xd0 } }
#define FV_BB_SMC_LOGO_FFS_FILE_10_GUID { 0x938de4b6, 0x7ddc, 0x4f6b, { 0x96, 0x50, 0xc0, 0x96, 0x5b, 0xb0, 0x83, 0xa } }
#define FV_BB_SMC_LOGO_FFS_FILE_11_GUID { 0x71381be7, 0x3929, 0x445b, { 0x94, 0x7f, 0xb9, 0x4d, 0x2d, 0x29, 0xa1, 0x19 } }
#define FV_BB_SMC_LOGO_FFS_FILE_12_GUID { 0x62957fa9, 0x9be4, 0x44e5, { 0xb2, 0x23, 0xa, 0x3e, 0x92, 0xc2, 0x49, 0xa7 } }
#define FV_BB_SMC_LOGO_FFS_FILE_13_GUID { 0xdf4948e8, 0xfe20, 0x4e36, { 0xa6, 0x34, 0x77, 0x6b, 0x41, 0x58, 0x45, 0x92 } }
#define FV_BB_SMC_LOGO_FFS_FILE_14_GUID { 0x6475b81f, 0x1dc0, 0x4027, { 0x8d, 0xda, 0xc, 0xea, 0xc0, 0x33, 0xc3, 0xd8 } }
#define FV_BB_SMC_LOGO_FFS_FILE_15_GUID { 0x414ff16f, 0x903d, 0x4bd9, { 0xb0, 0x86, 0x77, 0xca, 0x2b, 0x6c, 0xbc, 0x6d } }
#define FV_BB_SMC_LOGO_FFS_FILE_16_GUID { 0x84564204, 0x6134, 0x4187, { 0xa7, 0x79, 0xe7, 0x3e, 0x5e, 0x7e, 0x83, 0x35 } }
#define FV_BB_SMC_LOGO_FFS_FILE_17_GUID { 0xf71c187a, 0x6ab6, 0x4a21, { 0xad, 0x6f, 0xcd, 0x1f, 0xd1, 0x2, 0x26, 0x7a } }
#define FV_BB_SMC_LOGO_FFS_FILE_18_GUID { 0x6ec74821, 0xe710, 0x41e8, { 0xa4, 0x29, 0xcc, 0xe4, 0xb8, 0x2f, 0xf, 0x55 } }
#define FV_BB_SMC_LOGO_FFS_FILE_19_GUID { 0x61874e83, 0x5626, 0x4308, { 0xa0, 0x5, 0xbd, 0xe7, 0x63, 0x35, 0xcf, 0x9a } }
#define FV_BB_SMC_LOGO_FFS_FILE_20_GUID { 0xeeb7c1dd, 0x7ac1, 0x4b5c, { 0x92, 0x1e, 0xe4, 0x78, 0xa0, 0x81, 0xe, 0xed } }
#define FV_BB_SMC_LOGO_FFS_FILE_21_GUID { 0xdcc6e05f, 0x8bd3, 0x4ee4, { 0x9d, 0xa7, 0xee, 0x37, 0x5d, 0xa2, 0xb6, 0x4c } }
#define FV_BB_SMC_LOGO_FFS_FILE_22_GUID { 0xfe31045c, 0x34d6, 0x4fc0, { 0x90, 0xab, 0xcb, 0xd, 0xed, 0x6, 0xc6, 0xde } }
#define FV_BB_SMC_LOGO_FFS_FILE_23_GUID { 0x643cdeb8, 0xc57b, 0x4c1c, { 0x82, 0x4, 0x8e, 0xf2, 0x18, 0x95, 0x92, 0xc7 } }
#define FV_BB_SMC_LOGO_FFS_FILE_24_GUID { 0x62cc0a79, 0xbc29, 0x4f8c, { 0xa1, 0x21, 0xa0, 0x82, 0x12, 0x6c, 0x3c, 0xa1 } }
#define FV_BB_SMC_LOGO_FFS_FILE_25_GUID { 0xf6df1043, 0x7f39, 0x45b4, { 0xa2, 0xa2, 0x24, 0x46, 0x3d, 0x5f, 0x6c, 0x1b } }
#define FV_BB_SMC_LOGO_FFS_FILE_26_GUID { 0x9b4bf703, 0xc3ce, 0x49eb, { 0x8a, 0xbc, 0x2a, 0x9d, 0x8e, 0xbf, 0x91, 0x62 } }
#define FV_BB_SMC_LOGO_FFS_FILE_27_GUID { 0xca6c03df, 0xb3f0, 0x4e6b, { 0x8c, 0xd0, 0x1d, 0x9a, 0xe0, 0x4d, 0xe8, 0x83 } }
#define FV_BB_SMC_LOGO_FFS_FILE_28_GUID { 0x640f91a7, 0x755c, 0x4bc4, { 0xae, 0x80, 0x35, 0xdd, 0xf, 0x35, 0xc, 0xea } }
#define FV_BB_SMC_LOGO_FFS_FILE_29_GUID { 0xd2fc510b, 0x1ce7, 0x4e1a, { 0xa7, 0x78, 0xf7, 0x25, 0xe1, 0xf3, 0x33, 0xb } }
#define FV_BB_SMC_LOGO_FFS_FILE_30_GUID { 0x7794959c, 0xcc3e, 0x4e63, { 0x94, 0x69, 0xe, 0xb4, 0x59, 0xf6, 0x65, 0x77 } }
#define FV_BB_SMC_LOGO_FFS_FILE_31_GUID { 0xc3a2bfc8, 0xc816, 0x48b6, { 0x92, 0x84, 0xa7, 0x46, 0x8b, 0x93, 0xdd, 0xac } }
#define FV_BB_SMC_LOGO_FFS_FILE_32_GUID { 0x4bb87008, 0x406b, 0x49bb, { 0x84, 0x89, 0xfb, 0xff, 0xdf, 0xb4, 0xfa, 0xe } }
#define FV_BB_SMC_LOGO_FFS_FILE_33_GUID { 0x1e96e77a, 0x6ec4, 0x4027, { 0xa2, 0x8b, 0x0, 0xfa, 0xa0, 0x5f, 0xef, 0xdd } }
#define FV_BB_SMC_LOGO_FFS_FILE_34_GUID { 0x58fd9161, 0x3f8a, 0x4cfc, { 0x87, 0xa1, 0xc9, 0xfa, 0xa2, 0xc, 0x4b, 0xac } }
#define FV_BB_SMC_LOGO_FFS_FILE_35_GUID { 0xc39cfea9, 0xf5b3, 0x4955, { 0x82, 0x41, 0xae, 0xa, 0xb0, 0xc6, 0x9d, 0xa5 } }
#define FV_BB_SMC_LOGO_FFS_FILE_36_GUID { 0xa2519739, 0x812, 0x4239, { 0x95, 0xbc, 0x45, 0xbb, 0xb1, 0x87, 0x53, 0xb } }
#define FV_BB_SMC_LOGO_FFS_FILE_37_GUID { 0xc2e0040d, 0xfc23, 0x4276, { 0x80, 0x4c, 0x76, 0xfd, 0x6, 0x1, 0x2d, 0x9a } }
#define FV_BB_SMC_LOGO_FFS_FILE_38_GUID { 0x4062a755, 0xdfe2, 0x4ea1, { 0x95, 0x6c, 0xf6, 0x99, 0x16, 0x85, 0x8, 0xd3 } }
#define FV_BB_SMC_LOGO_FFS_FILE_39_GUID { 0x4865193b, 0x927a, 0x4ede, { 0x99, 0x4a, 0x7, 0xb9, 0xf0, 0x26, 0x4f, 0x6f } }
#define FV_BB_SMC_LOGO_FFS_FILE_40_GUID { 0xb6290c25, 0xd08a, 0x40bd, { 0x82, 0x64, 0x32, 0x33, 0x48, 0x8a, 0x11, 0xc4 } }
#define FV_BB_SMC_LOGO_FFS_FILE_41_GUID { 0x4f336706, 0xcf1f, 0x4c27, { 0x89, 0xd6, 0x30, 0xb2, 0x30, 0x57, 0x8a, 0xfa } }
#define FV_BB_SMC_LOGO_FFS_FILE_42_GUID { 0xa5c5e294, 0x56b1, 0x442c, { 0x8b, 0xd8, 0xa8, 0xa0, 0x71, 0x58, 0xf5, 0xbf } }
#define FV_BB_SMC_LOGO_FFS_FILE_43_GUID { 0xf6295b1b, 0x3263, 0x47f3, { 0xaa, 0x1, 0x6e, 0x76, 0x63, 0x29, 0x88, 0xe } }
#define FV_BB_SMC_LOGO_FFS_FILE_44_GUID { 0x97236c5c, 0x7058, 0x41a2, { 0xa2, 0x24, 0xf5, 0xc8, 0x46, 0x0, 0xe5, 0x37 } }
#define FV_BB_SMC_LOGO_FFS_FILE_45_GUID { 0xd7ca6fe, 0xeb5e, 0x4cad, { 0xbf, 0x83, 0x11, 0x28, 0xae, 0x1e, 0xca, 0xb6 } }
#define FV_BB_SMC_LOGO_FFS_FILE_46_GUID { 0x7b6d13d8, 0xd050, 0x4bb0, { 0x95, 0xfd, 0x9c, 0x85, 0x99, 0x6c, 0xeb, 0x40 } }
#define FV_BB_SMC_LOGO_FFS_FILE_47_GUID { 0xf6c20f30, 0x2674, 0x4c17, { 0xbd, 0x49, 0x3f, 0x76, 0xf4, 0x81, 0xa7, 0x11 } }
#define FV_BB_SMC_LOGO_FFS_FILE_48_GUID { 0x5de6e828, 0xe749, 0x45b4, { 0x96, 0x60, 0xa4, 0x2f, 0x87, 0x3a, 0xbf, 0xe5 } }

typedef struct{
    EFI_GUID LogName;
    UINT16    xPos;
    UINT16    yPos;
} LOGO_DATA;

#define SmcScratchBufferSize 0x4000  // Got from function LzmaGuidedSectionGetInfo
#define SmcOutputBufferSize 49156    // 48KB + Section Header

#define aligment_FFS        7
#define aligment_section    3

#define BmpNum              48

#define EFI_DEFAULT_LOGO_ID_GUID \
  {0x12D1D3A2,0x99F7,0x420b,0xBC,0x69,0x8B,0xB1,0xD4,0x92,0xA3,0x55}

#define EFI_DEFAULT_LOGO_SECTION_GUID \
  {0x3EBE0285,0x5458,0x3AF9,0xA1,0xED,0xD3,0x55,0xED,0xB1,0x00,0xB9}

#define EFI_DEFAULT_BMP_LOGO_GUID \
  {0x7BB28B99,0x61BB,0x11d5,0x9A,0x5D,0x00,0x90,0x27,0x3F,0xC1,0x4D}

#endif //#if EarlyVideo_Mode

VOID
ScanPciDeviceAndInitDevice (
  IN  IPD_t                  *IPDTable
  );

EFI_STATUS
EFIAPI PPI_ClearScreen (VOID);


EFI_STATUS
EFIAPI PPI_EnableCursor (
  IN  BOOLEAN            Cursor
  );

VOID
EFIAPI PPI_WriteChar (
  IN UINT8     Xaxis,
  IN UINT8     Yaxis,
  IN UINT8     Attrib,
  IN UINT8     Char
  );

VOID
EFIAPI PPI_ClearLine (
  IN UINT8     Yaxis
  );

UINT8
EFIAPI PPI_OutputString (
  IN  UINT8               Xaxis,
  IN  UINT8               Yaxis,
  IN  UINT8               Attrib,
  IN  CHAR8              *OutString
  );

VOID
EFIAPI PPI_PostProgressMessage (
  IN UINT8                       Yaxis,
  IN CHAR8                      *OutString
  );

//VOID ASTVBIOSASMENTRY (VOID);

VOID AstVbiosInitEntry (
  IN  EFI_PEI_SERVICES    **PeiServices
  );

VOID EnableASpeedDevice (VOID);

/****** DO NOT WRITE BELOW THIS LINE *******/
#ifdef  __cplusplus
}
#endif
#endif

